<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>worker_cola_multithread: Worker &amp; Thread-Safe Queue</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">worker_cola_multithread<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">C++ multithreaded work queue with worker pool and RAII-safe synchronization.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Worker &amp; Thread-Safe Queue </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <img src="https://github.com/sergioguerreroblanco-oss/worker_cola_multithread/actions/workflows/ci.yml/badge.svg" alt="CI" style="pointer-events: none;" class="inline"/></p>
<p><b>Worker &amp; Queue</b> is a modern C++14 project demonstrating a <b>multithreaded worker pool</b> that executes queued tasks concurrently using a <b>thread-safe queue</b>. <br  />
 It was developed as a <b>technical test</b> but structured as a production-quality module, including <b>unit testing, logging, Docker support, CI/CD integration, and clean CMake presets</b>.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
‚ú® Core Features</h1>
<ul>
<li>**Thread-safe generic queue (<code><a class="el" href="da/d7e/classThreadSafeQueue.html" title="Thread-safe FIFO queue supporting multiple producers and consumers.">ThreadSafeQueue</a>&lt;T&gt;</code>)** <br  />
<ul>
<li>Implements synchronized access using <code>std::mutex</code> and <code>std::condition_variable</code>. <br  />
</li>
<li>Provides <code>push()</code>, <code>pop()</code>, <code>try_pop()</code>, <code>empty()</code>, <code>size()</code>, <code>clear()</code>, and <code>close()</code> methods. <br  />
</li>
<li>Supports blocking <code>pop()</code> that waits for new data or shutdown signals. <br  />
</li>
<li>Designed for safe use across multiple producers and consumers.</li>
</ul>
</li>
<li>**Worker Pool (<code><a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a></code>)** <br  />
<ul>
<li>A simple yet efficient thread pool built around <code><a class="el" href="da/d7e/classThreadSafeQueue.html" title="Thread-safe FIFO queue supporting multiple producers and consumers.">ThreadSafeQueue</a>&lt;std::function&lt;void()&gt;&gt;</code>. <br  />
</li>
<li>Spawns multiple worker threads that consume and execute submitted tasks concurrently. <br  />
</li>
<li>Provides lifecycle control via <code>start()</code>, <code>submit()</code>, and <code>stop()</code>. <br  />
</li>
<li>Ensures graceful shutdown and task draining before termination. <br  />
</li>
</ul>
</li>
<li>**Logging System (<code><a class="el" href="db/d67/classLogger.html" title="Static thread-safe console logger with configurable severity filtering.">Logger</a></code>)** <br  />
<ul>
<li>Thread-safe static utility for centralized logging. <br  />
</li>
<li>Configurable minimum log level (<code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>). <br  />
</li>
<li>Adds timestamp and severity to each log line. <br  />
</li>
<li>Used across all components for consistent diagnostics.</li>
</ul>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
üåü Project Highlights</h1>
<ul>
<li><b>Unit testing</b> with GoogleTest (<code>ctest</code> integrated). <br  />
</li>
<li><b>Thread-safe design</b>: no data races or undefined behavior in queue or pool. <br  />
</li>
<li><b>CMake presets</b> for consistent builds (<code>debug</code> / <code>release</code>). <br  />
</li>
<li><b>Cross-platform</b>: builds cleanly on Linux, Windows, and inside Docker. <br  />
</li>
<li><b>CI integration</b> via GitHub Actions:<ul>
<li>Builds and runs all unit tests automatically.</li>
<li>Validates Docker image reproducibility.</li>
</ul>
</li>
<li><b>Reproducible builds</b> using a minimal <b>Ubuntu 22.04</b> image and <b>CMake 3.28</b>.</li>
<li><b>Strict compiler flags</b> (<code>-Wall -Wextra -Wpedantic</code>) to enforce quality and correctness.</li>
<li><b>C++14 compliance</b> ‚Äî no dependency on newer standards.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md6"></a>
üèó Architecture</h1>
<p>The following diagram illustrates the internal architecture of the project:</p>
<p>Main Thread acts as the producer ‚Äî it submits tasks (lambdas or callable functions) to the <a class="el" href="da/d7e/classThreadSafeQueue.html" title="Thread-safe FIFO queue supporting multiple producers and consumers.">ThreadSafeQueue</a>.</p>
<p>ThreadSafeQueue&lt;T&gt; safely synchronizes access to the task queue among multiple producers and worker threads.</p>
<p><a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a> manages a configurable number of worker threads.</p>
<p>Each Worker Thread repeatedly calls pop() to retrieve and execute tasks until the queue is closed.</p>
<p>The <a class="el" href="db/d67/classLogger.html" title="Static thread-safe console logger with configurable severity filtering.">Logger</a> provides synchronized output from all threads, ensuring readable and timestamped logs. </p><div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph Main [Main Thread]</div>
<div class="line">        P[&quot;Producer - submits std::function&amp;lt;void()&amp;gt; tasks&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Queue [&quot;ThreadSafeQueue&amp;lt;std::function&amp;lt;void()&amp;gt;&amp;gt;&quot;]</div>
<div class="line">        Q[&quot;FIFO Queue - synchronized access&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph WorkerPool [WorkerPool]</div>
<div class="line">        direction TB</div>
<div class="line">        WP[&quot;Spawns N worker threads&quot;]</div>
<div class="line">        W1[&quot;Worker Thread #1&quot;]</div>
<div class="line">        W2[&quot;Worker Thread #2&quot;]</div>
<div class="line">        W3[&quot;Worker Thread #3&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Logger [Logger]</div>
<div class="line">        L[&quot;Thread-safe Logging&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    P --&gt;|&quot;submit()&quot;| Q</div>
<div class="line">    WP --&gt;|&quot;start()&quot;| W1</div>
<div class="line">    WP --&gt;|&quot;start()&quot;| W2</div>
<div class="line">    WP --&gt;|&quot;start()&quot;| W3</div>
<div class="line">    W1 --&gt;|&quot;pop() + execute()&quot;| Q</div>
<div class="line">    W2 --&gt;|&quot;pop() + execute()&quot;| Q</div>
<div class="line">    W3 --&gt;|&quot;pop() + execute()&quot;| Q</div>
<div class="line">    W1 --&gt;|&quot;info()/error()&quot;| L</div>
<div class="line">    W2 --&gt;|&quot;info()/error()&quot;| L</div>
<div class="line">    W3 --&gt;|&quot;info()/error()&quot;| L</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md8"></a>
üóÇ Class Diagram</h1>
<div class="fragment"><div class="line">classDiagram</div>
<div class="line">    class ThreadSafeQueue~T~ {</div>
<div class="line">        - deque&amp;lt;T&amp;gt; buffer</div>
<div class="line">        - mutable mutex mtx</div>
<div class="line">        - condition_variable cv</div>
<div class="line">        - bool closed</div>
<div class="line">        + ThreadSafeQueue()</div>
<div class="line">        + void push(T&amp;amp;&amp;amp; data)</div>
<div class="line">        + bool pop(T&amp;amp; data)</div>
<div class="line">        + optional&amp;lt;T&amp;gt; try_pop()</div>
<div class="line">        + bool empty() const</div>
<div class="line">        + size_t size() const</div>
<div class="line">        + void clear()</div>
<div class="line">        + void close()</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class WorkerPool {</div>
<div class="line">        - ThreadSafeQueue&amp;lt;std::function&amp;lt;void()&amp;gt;&amp;gt;&amp;amp; task_queue</div>
<div class="line">        - atomic&amp;lt;bool&amp;gt; running</div>
<div class="line">        - unordered_map&amp;lt;string, thread&amp;gt; workers</div>
<div class="line">        + WorkerPool(ThreadSafeQueue&amp;lt;std::function&amp;lt;void()&amp;gt;&amp;gt;&amp;amp; queue)</div>
<div class="line">        + void start(int number_workers)</div>
<div class="line">        + void submit(std::function&amp;lt;void()&amp;gt; task)</div>
<div class="line">        + void stop()</div>
<div class="line">        - void run(const string&amp;amp; worker_name)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Logger {</div>
<div class="line">        - static mutex mtx</div>
<div class="line">        - static Level minLevel</div>
<div class="line">        + static void set_min_level(Level lvl)</div>
<div class="line">        + static void debug(const string&amp;amp; msg)</div>
<div class="line">        + static void info(const string&amp;amp; msg)</div>
<div class="line">        + static void warn(const string&amp;amp; msg)</div>
<div class="line">        + static void error(const string&amp;amp; msg)</div>
<div class="line">        + static void log(Level lvl, const string&amp;amp; msg)</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    %% Relationships</div>
<div class="line">    WorkerPool --&gt; ThreadSafeQueue : uses</div>
<div class="line">    WorkerPool ..&gt; Logger : logs to</div>
<div class="line">    ThreadSafeQueue ..&gt; Logger : logs to</div>
</div><!-- fragment --><p> üîç Explanation</p><ul>
<li>ThreadSafeQueue&lt;T&gt; ‚Äî synchronized queue for safe producer/consumer access.</li>
<li><a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a> ‚Äî manages multiple worker threads that consume and execute tasks from the queue.</li>
<li><a class="el" href="db/d67/classLogger.html" title="Static thread-safe console logger with configurable severity filtering.">Logger</a> ‚Äî shared static utility providing thread-safe logging.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md10"></a>
üõ† Build Instructions</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Windows (Visual Studio 2022)</h2>
<ol type="1">
<li>Open Visual Studio 2022.</li>
<li>Choose ‚ÄúOpen Folder‚Äù ‚Üí select the project root (worker_cola_multithread/).</li>
<li>Visual Studio automatically detects CMakePresets.json.</li>
<li>In the toolbar, select a configuration:<ul>
<li>debug ‚Üí includes unit tests (BUILD_TESTING=ON).</li>
<li>release ‚Üí optimized build.</li>
</ul>
</li>
<li>Build the project (Ctrl + Shift + B).</li>
<li>The executable will be generated at:</li>
</ol>
<div class="fragment"><div class="line">build/&lt;preset&gt;/cola_worker[.exe]</div>
</div><!-- fragment --><ol type="1">
<li>Run it directly from Visual Studio or from the command line.</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
Windows (PowerShell/CLI)</h2>
<p>You can also build manually from a terminal with CMake presets:</p>
<div class="fragment"><div class="line">cmake --preset release    # Configure for Release</div>
<div class="line">cmake --build --preset release -j  # Build using Ninja or MSBuild</div>
<div class="line"> </div>
<div class="line">cmake --preset debug      # Configure for Debug (with tests)</div>
<div class="line">cmake --build --preset debug -j</div>
<div class="line">ctest --preset debug      # Run unit tests</div>
</div><!-- fragment --> <hr  />
<h2><a class="anchor" id="autotoc_md15"></a>
Linux / WSL (Debian/Ubuntu based)</h2>
<p>Install dependencies: </p><div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install -y build-essential cmake ninja-build git</div>
</div><!-- fragment --><p> Clone and build: </p><div class="fragment"><div class="line">git clone https://github.com/sergioguerreroblanco-oss/worker_cola_multithread.git</div>
<div class="line">cd worker_cola_multithread</div>
<div class="line"> </div>
<div class="line">cmake --preset release</div>
<div class="line">cmake --build --preset release -j$(nproc)</div>
<div class="line"> </div>
<div class="line"># Debug build (includes unit tests)</div>
<div class="line">cmake --preset debug</div>
<div class="line">cmake --build --preset debug -j$(nproc)</div>
<div class="line">ctest --preset debug</div>
</div><!-- fragment --><p> The resulting binary will be located in: </p><div class="fragment"><div class="line">build/release/cola_worker</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Docker (fully reproducible environment)</h2>
<p>The project includes a Dockerfile that performs a clean build and runs tests automatically: </p><div class="fragment"><div class="line">docker build -t cola-worker:local .</div>
<div class="line">docker run --rm cola-worker:local</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md18"></a>
üß™ Unit Tests</h1>
<p>Unit tests are implemented with GoogleTest and integrated into the CMake build system via CTest. They validate the core behavior of both <a class="el" href="da/d7e/classThreadSafeQueue.html" title="Thread-safe FIFO queue supporting multiple producers and consumers.">ThreadSafeQueue</a> and <a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a> to ensure thread-safe operation and correct synchronization between producer and consumer threads.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
‚úÖ Covered Scenarios</h2>
<ul>
<li><a class="el" href="da/d7e/classThreadSafeQueue.html" title="Thread-safe FIFO queue supporting multiple producers and consumers.">ThreadSafeQueue</a><ul>
<li>push() / pop() correctly transfer ownership of elements.</li>
<li>try_pop() safely handles empty queues.</li>
<li>close() unblocks waiting threads gracefully.</li>
<li>size() and empty() reflect real state under concurrency.</li>
</ul>
</li>
<li><a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a><ul>
<li>All submitted tasks are executed.</li>
<li>Supports variable worker counts.</li>
<li>Handles shutdown correctly, waiting for ongoing tasks.</li>
<li>Properly joins all threads at stop.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Running Tests (Windows)</h2>
<p>On Windows, the project has been validated with Visual Studio 2022. Tests can be executed directly from Test Explorer: </p><div class="fragment"><div class="line">‚Üí Test ‚Üí Run All Tests</div>
</div><!-- fragment --><p>Alternatively, you can also build and run tests using the provided CMake presets: </p><div class="fragment"><div class="line">cmake --preset debug</div>
<div class="line">cmake --build --preset debug</div>
<div class="line">ctest --preset debug --output-on-failure</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>&zwj;Note - Need to have installed:</p><ol type="1">
<li><a href="https://github.com/Kitware/CMake/releases/download/v4.1.1/cmake-4.1.1-windows-x86_64.msi">CMake</a></li>
<li>Ninja: </li>
</ol>
</blockquote>
<p>&gt;<code>bash &lt;blockquote&gt;&amp;zwj;winget install Ninja-build.Ninja &lt;/blockquote&gt;&gt;</code></p>
<h2><a class="anchor" id="autotoc_md21"></a>
Running Tests (Linux / Docker)</h2>
<p>After building the project, run the following command inside the build directory:</p>
<div class="fragment"><div class="line">cd build/debug</div>
<div class="line">ctest --output-on-failure</div>
</div><!-- fragment --><p>This will automatically discover and execute all registered GoogleTest cases.</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Example output:</h2>
<p>(example output inside container) </p><div class="fragment"><div class="line">Test project C:/worker_cola_multithread/build/debug</div>
<div class="line">    Start 1: ThreadSafeQueue.PushPopWorks</div>
<div class="line">1/9 Test #1: ThreadSafeQueue.PushPopWorks ...........................................................   Passed    0.01 sec</div>
<div class="line">    Start 2: ThreadSafeQueue.GracefulClose</div>
<div class="line">2/9 Test #2: ThreadSafeQueue.GracefulClose ..........................................................   Passed    0.01 sec</div>
<div class="line">    Start 3: ThreadSafeQueue.TryPopNonBlocking</div>
<div class="line">3/9 Test #3: ThreadSafeQueue.TryPopNonBlocking ......................................................   Passed    0.01 sec</div>
<div class="line">    Start 4: ThreadSafeQueue.TryPopConcurrentReaders</div>
<div class="line">4/9 Test #4: ThreadSafeQueue.TryPopConcurrentReaders ................................................   Passed    0.01 sec</div>
<div class="line">    Start 5: WorkerPool.ExecutesAllTasks</div>
<div class="line">5/9 Test #5: WorkerPool.ExecutesAllTasks ............................................................   Passed    0.52 sec</div>
<div class="line">    Start 6: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/1</div>
<div class="line">6/9 Test #6: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/1 ...   Passed    0.32 sec</div>
<div class="line">    Start 7: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/2</div>
<div class="line">7/9 Test #7: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/2 ...   Passed    0.31 sec</div>
<div class="line">    Start 8: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/4</div>
<div class="line">8/9 Test #8: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/4 ...   Passed    0.31 sec</div>
<div class="line">    Start 9: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/8</div>
<div class="line">9/9 Test #9: WorkerPoolVariations/WorkerPoolParamTest.ExecutesAllTasksWithDifferentWorkerCounts/8 ...   Passed    0.32 sec</div>
<div class="line">100% tests passed, 0 tests failed out of 9</div>
<div class="line">Total Test time (real) =   1.83 sec</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md24"></a>
üê≥ Docker</h1>
<p>This project includes a Dockerfile to provide a reproducible build and test environment.</p>
<p>Requires Docker installed and running on your system.</p>
<p>Build image:</p>
<div class="fragment"><div class="line">build -t worker_cola_multithread:dev .</div>
</div><!-- fragment --><p>Run tests inside container:</p>
<div class="fragment"><div class="line">run --rm worker_cola_multithread:dev</div>
</div><!-- fragment --><p>Run main binary:</p>
<div class="fragment"><div class="line">run --rm worker_cola_multithread:dev ./build/release/cola_worker</div>
</div><!-- fragment --><p>By default, the container builds the project in /app/build/. The binary can be invoked as shown.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md26"></a>
üîÑ Continuous Integration</h1>
<p>This project provides two GitHub Actions workflows under .github/workflows/:</p>
<h2><a class="anchor" id="autotoc_md27"></a>
ci.yml</h2>
<p>This workflow performs the following steps:</p><ul>
<li>Builds the project on ubuntu-latest using CMake + Ninja and g++.</li>
<li>Runs all unit tests using CTest (with detailed failure output).</li>
<li>Builds the Docker image and verifies that it executes correctly inside a container.</li>
</ul>
<p>‚úÖ Ensures that:</p><ul>
<li>The codebase compiles cleanly on a fresh Linux environment.</li>
<li>All unit tests pass consistently.</li>
<li>The Docker image remains functional and up-to-date.</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
docs.yml</h2>
<p>This workflow automates documentation generation:</p><ul>
<li>Installs Doxygen, Graphviz, and LaTeX.</li>
<li>Generates both HTML and PDF documentation.</li>
<li>Uploads the generated artifacts for download directly from the workflow summary.</li>
<li>Deploys HTML docs to GitHub Pages when pushing to the main branch.</li>
</ul>
<p>‚úÖ Ensures that:</p><ul>
<li>Documentation is always in sync with the current source code.</li>
<li>Both HTML and PDF outputs are built automatically.</li>
<li>Public docs can be viewed directly from the project‚Äôs GitHub Pages site.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md30"></a>
üìÇ Project Structure</h1>
<div class="fragment"><div class="line">worker_cola_multithread/</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ .clang-format              # Code style configuration (Google-based, 4 spaces)</div>
<div class="line">‚îú‚îÄ‚îÄ .dockerignore              # Files ignored during Docker build</div>
<div class="line">‚îú‚îÄ‚îÄ .gitattributes</div>
<div class="line">‚îú‚îÄ‚îÄ .gitignore</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ CMakeLists.txt             # Root CMake configuration</div>
<div class="line">‚îú‚îÄ‚îÄ CMakePresets.json          # Build presets (Debug / Release)</div>
<div class="line">‚îú‚îÄ‚îÄ Dockerfile                 # Docker build and test environment</div>
<div class="line">‚îú‚îÄ‚îÄ README.md                  # Main project documentation</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ docs/                      # Documentation files</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ Doxyfile               # Doxygen configuration</div>
<div class="line">‚îÇ   ‚îî‚îÄ‚îÄ README.md              # Internal documentation guide</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ include/                   # Public headers</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ third_party/           # External or vendor code (future extensions)</div>
<div class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ optional.hpp       # optional&lt;T&gt; for C++14 (optional-lite)</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ logger.h               # Thread-safe logging utility</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ thread_safe_queue.h    # Generic thread-safe queue declaration</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ thread_safe_queue.ipp  # Inline template implementation</div>
<div class="line">‚îÇ   ‚îî‚îÄ‚îÄ worker_pool.h          # Worker pool managing multiple threads</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ scripts/                   # Helper scripts</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ build.ps1              # Windows build (PowerShell)</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ build.sh               # Linux / WSL build script</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ generate_docs.ps1      # Generate Doxygen docs on Windows</div>
<div class="line">‚îÇ   ‚îî‚îÄ‚îÄ generate_docs.sh       # Generate Doxygen docs on Linux</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ src/                       # Source code implementation</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ logger.cpp             # Logger definitions</div>
<div class="line">‚îÇ   ‚îú‚îÄ‚îÄ main.cpp               # Application entry point</div>
<div class="line">‚îÇ   ‚îî‚îÄ‚îÄ worker_pool.cpp        # Worker pool logic</div>
<div class="line">‚îÇ</div>
<div class="line">‚îú‚îÄ‚îÄ tests/                     # Unit test suite</div>
<div class="line">‚îÇ   ‚îî‚îÄ‚îÄ test_main.cpp          # GoogleTest entry point and test cases</div>
<div class="line">‚îÇ</div>
<div class="line">‚îî‚îÄ‚îÄ .github/workflows/         # CI/CD pipelines</div>
<div class="line">    ‚îú‚îÄ‚îÄ ci.yml                 # Build, test, and Docker validation</div>
<div class="line">    ‚îî‚îÄ‚îÄ docs.yml               # Auto-generate and upload documentation</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md32"></a>
üìñ Documentation</h1>
<p>This project uses <a href="https://www.doxygen.nl/">Doxygen</a> to generate API documentation from source code comments.</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Generate documentation</h2>
<h3><a class="anchor" id="autotoc_md34"></a>
Windows (PowerShell)</h3>
<div class="fragment"><div class="line">Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass</div>
<div class="line">.\scripts\generate_docs.ps1</div>
</div><!-- fragment --><p> Generates HTML (docs/html/index.html) and LaTeX sources (docs/latex/).</p>
<p>PDF (refman.pdf) is not generated on Windows unless you install a full LaTeX toolchain (MiKTeX/TeX Live + make).</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Linux / WSL (Debian/Ubuntu based)</h3>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install -y doxygen graphviz texlive-latex-base texlive-fonts-recommended texlive-latex-extra make</div>
<div class="line">chmod +x scripts/generate_docs.sh</div>
<div class="line">./scripts/generate_docs.sh</div>
</div><!-- fragment --><p> Generates HTML (docs/html/index.html) and PDF (docs/latex/refman.pdf).</p>
<p>Open in your browser: </p><div class="fragment"><div class="line">docs/html/index.html</div>
</div><!-- fragment --><p>For more details, see docs/README.md</p>
<hr  />
<h1><a class="anchor" id="autotoc_md37"></a>
üé® Code Style (clang-format)</h1>
<p>This project uses <b>clang-format</b> to enforce a consistent C++ code style. <br  />
 The formatting rules are defined in <a href="./.clang-format"><code>.clang-format</code></a>.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
üîß Chosen Style</h2>
<p>The configuration is based on Google C++ Style, with a few modifications to improve readability for embedded and multithreaded systems:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>BasedOnStyle</b>   </td><td class="markdownTableBodyNone"><code>Google</code>   </td><td class="markdownTableBodyNone">Provides a solid, modern baseline for C++ formatting.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Language</b>   </td><td class="markdownTableBodyNone"><code>Cpp</code>   </td><td class="markdownTableBodyNone">Ensures C++-specific syntax rules (not generic C).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>IndentWidth / TabWidth</b>   </td><td class="markdownTableBodyNone"><code>4</code>   </td><td class="markdownTableBodyNone">Uses 4 spaces per indent (vs Google‚Äôs default 2) for improved block readability.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>UseTab</b>   </td><td class="markdownTableBodyNone"><code>Never</code>   </td><td class="markdownTableBodyNone">Enforces spaces only (consistent across editors).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>ColumnLimit</b>   </td><td class="markdownTableBodyNone"><code>100</code>   </td><td class="markdownTableBodyNone">Balances readability and long template expressions.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>BreakBeforeBraces</b>   </td><td class="markdownTableBodyNone"><code>Allman</code>   </td><td class="markdownTableBodyNone">Places braces on their own line, improving visual structure in nested code.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>AllowShortIfStatementsOnASingleLine</b>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Forces explicit line breaks for clarity.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>AllowShortLoopsOnASingleLine</b>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Prevents compact loop bodies from being overlooked.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>AllowShortFunctionsOnASingleLine</b>   </td><td class="markdownTableBodyNone"><code>Inline</code>   </td><td class="markdownTableBodyNone">Allows concise inline functions on a single line only.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>PointerAlignment</b>   </td><td class="markdownTableBodyNone"><code>Left</code>   </td><td class="markdownTableBodyNone">Keeps <code>T* ptr</code> instead of <code>T *ptr</code> ‚Äî cleaner and more conventional in C++.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>DerivePointerAlignment</b>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Disables automatic guessing; enforces explicit <code>PointerAlignment</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>SpaceBeforeParens</b>   </td><td class="markdownTableBodyNone"><code>ControlStatements</code>   </td><td class="markdownTableBodyNone">Adds a space in <code>if (</code> / <code>while (</code> for readability, not for calls.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SortIncludes</b>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Automatically organizes include directives alphabetically.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>IncludeBlocks</b>   </td><td class="markdownTableBodyNone"><code>Regroup</code>   </td><td class="markdownTableBodyNone">Groups and reorders includes logically within the file.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>AlignConsecutiveAssignments</b>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Improves alignment of variable assignments.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>AlignConsecutiveDeclarations</b>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Aligns consecutive variable declarations.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>AlignOperands</b>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Keeps arithmetic/logical expressions neatly aligned.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>CommentPragmas</b>   </td><td class="markdownTableBodyNone">&lsquo;&rsquo;^!'<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Allows pragma-specific comment formatting. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; **FixNamespaceComments** \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Automatically adds trailing</code>// namespace X<code>comments when closing. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; **SpacesBeforeTrailingComments** \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>2<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Keeps a consistent gap before end-of-line comments. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; **KeepEmptyLinesAtTheStartOfBlocks** \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>false`   </td><td class="markdownTableBodyNone">Avoids unnecessary blank lines at block starts.   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md40"></a>
Windows (Visual Studio Code / PowerShell)</h2>
<ol type="1">
<li>Install LLVM (includes clang-format):<ul>
<li>Download the LLVM installer for Windows (<code><a href="https://github.com/llvm/llvm-project/releases">https://github.com/llvm/llvm-project/releases</a></code>)</li>
<li>During setup, check ‚ÄúAdd LLVM to the system PATH‚Äù.</li>
</ul>
</li>
<li>Verify installation:</li>
</ol>
<div class="fragment"><div class="line">clang-format --version</div>
</div><!-- fragment --><ol type="1">
<li>Format all project files: <div class="fragment"><div class="line">clang-format -i include\*.h include\*.ipp src\*.cpp tests\*.cpp</div>
</div><!-- fragment --> </li>
</ol>
<h2><a class="anchor" id="autotoc_md41"></a>
Linux / WSL (Debian/Ubuntu based)</h2>
<ol type="1">
<li>Install clang-format: <div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install -y clang-format</div>
</div><!-- fragment --></li>
<li>Verify installation: <div class="fragment"><div class="line">clang-format --version</div>
</div><!-- fragment --></li>
<li>Format all project files: <div class="fragment"><div class="line">clang-format -i include/*.h include/*.ipp src/*.cpp tests/*.cpp</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md43"></a>
üìå Notes</h1>
<ul>
<li><p class="startli"><b>C++ Standard</b>: C++ 14 (set(CMAKE_CXX_STANDARD 14)).</p>
<p class="startli">Since std::optional is only available from C++ 17, this project integrates the lightweight <a href="https://github.com/nonstd-lite/optional-lite">optional-lite</a> library (<a class="el" href="db/dd5/optional_8hpp.html">include/third_party/optional.hpp</a>) to preserve equivalent semantics while remaining compatible with C++14.</p>
</li>
<li><p class="startli"><b>Thread Safety</b>: Fully managed through std::mutex, std::condition_variable, and std::atomic.</p>
<p class="startli">All shared data access is synchronized using RAII-based locking (std::lock_guard, std::unique_lock).</p>
</li>
<li><p class="startli"><b>Extensibility</b>:</p>
<p class="startli">The worker logic is decoupled from its execution policy through a clear separation of responsibilities. The <a class="el" href="d7/d4d/classWorkerPool.html" title="Fixed-size pool of worker threads that execute queued tasks concurrently.">WorkerPool</a> manages concurrency, while individual tasks (via std::function&lt;void()&gt;) define behavior ‚Äî allowing flexible and testable extensions.</p>
</li>
<li><p class="startli"><b>Logging</b>:</p>
<p class="startli">Centralized thread-safe <a class="el" href="db/d67/classLogger.html" title="Static thread-safe console logger with configurable severity filtering.">Logger</a> utility with severity levels (DEBUG, INFO, WARN, ERROR), ensuring coherent runtime diagnostics across threads.</p>
</li>
<li><p class="startli"><b>Cross-Platform Compatibility</b>:</p>
<p class="startli">Successfully builds and runs on: </p><pre class="fragment">- ü™ü Windows (MSVC 2022)
- üêß Linux (g++)
- üê≥ Docker container environments

Each environment uses consistent CMake presets to simplify builds and CI/CD automation.
</pre></li>
<li><p class="startli"><b>Queue Implementation</b>:</p>
<p class="startli">ThreadSafeQueue&lt;T&gt; uses an internal std::deque&lt;T&gt; instead of a custom circular buffer. This approach prioritizes simplicity, STL optimization, and correctness, while maintaining a deterministic FIFO order. A fixed-size limit could be trivially added, but for this design, unbounded size with explicit control (close(), clear()) provides better testability and robustness.</p>
</li>
<li><p class="startli"><b>Design Decision: Graceful Shutdown Philosophy</b></p>
<p class="startli">Earlier designs included explicit shutdown signaling (shutdown() with return states like OK, TIMEOUT, CLOSED). This was intentionally removed to keep the queue a pure, passive synchronization primitive. Instead, lifecycle management occurs externally: </p><pre class="fragment">- The WorkerPool sets a closed flag and signals all waiting threads via notify_all().
- Each worker exits naturally after completing the next pop() cycle.
- This approach avoids adding control logic into the data structure, preserving single-responsibility and predictable synchronization semantics.
</pre> <hr  />
</li>
</ul>
<h1><a class="anchor" id="autotoc_md44"></a>
‚ù§Ô∏è Acknowledgements</h1>
<p>This project was originally developed as part of a technical assessment, then extended into a fully professional implementation showcasing:</p><ul>
<li>Clean architecture and modular design.</li>
<li>Template-based generic programming.</li>
<li>Thread-safe data structures and concurrency patterns.</li>
<li>Comprehensive Doxygen documentation.</li>
<li>Automated testing (GoogleTest + CTest).</li>
<li>CI/CD pipelines (GitHub Actions).</li>
<li>Cross-platform Docker-based builds. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 24 2025 14:48:45 for worker_cola_multithread by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
