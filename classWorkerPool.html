<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>worker_cola_multithread: WorkerPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">worker_cola_multithread<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classWorkerPool-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">WorkerPool Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa9e69469d17c278d8d301b825029500c" id="r_aa9e69469d17c278d8d301b825029500c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorkerPool.html#aa9e69469d17c278d8d301b825029500c">WorkerPool</a> (<a class="el" href="classThreadSafeQueue.html">ThreadSafeQueue</a>&lt; std::function&lt; void()&gt; &gt; &amp;queue)</td></tr>
<tr class="memdesc:aa9e69469d17c278d8d301b825029500c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct.  <br /></td></tr>
<tr class="separator:aa9e69469d17c278d8d301b825029500c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ff5d62810ecbbf010558f2002b2571" id="r_af4ff5d62810ecbbf010558f2002b2571"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorkerPool.html#af4ff5d62810ecbbf010558f2002b2571">~WorkerPool</a> ()</td></tr>
<tr class="memdesc:af4ff5d62810ecbbf010558f2002b2571"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruct a <a class="el" href="classWorker.html" title="Worker thread that consumes data from a queue.">Worker</a> object.  <br /></td></tr>
<tr class="separator:af4ff5d62810ecbbf010558f2002b2571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3458f13daf33a37f0dd0575e9207a0e3" id="r_a3458f13daf33a37f0dd0575e9207a0e3"><td class="memItemLeft" align="right" valign="top"><a id="a3458f13daf33a37f0dd0575e9207a0e3" name="a3458f13daf33a37f0dd0575e9207a0e3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WorkerPool</b> (const <a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;)=delete</td></tr>
<tr class="memdesc:a3458f13daf33a37f0dd0575e9207a0e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable copy constructor. A <a class="el" href="classWorkerPool.html">WorkerPool</a> cannot be copied because it manages a std::thread, which is non-copyable. Copying would imply two Workers owning the same thread, which is undefined. <br /></td></tr>
<tr class="separator:a3458f13daf33a37f0dd0575e9207a0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba445f0a98ff65e501a022fdb5c2d96" id="r_a4ba445f0a98ff65e501a022fdb5c2d96"><td class="memItemLeft" align="right" valign="top"><a id="a4ba445f0a98ff65e501a022fdb5c2d96" name="a4ba445f0a98ff65e501a022fdb5c2d96"></a>
<a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;)=delete</td></tr>
<tr class="memdesc:a4ba445f0a98ff65e501a022fdb5c2d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable copy assignment operator. A <a class="el" href="classWorkerPool.html">WorkerPool</a> cannot be copy-assigned because std::thread cannot be duplicated or reassigned between different owners. <br /></td></tr>
<tr class="separator:a4ba445f0a98ff65e501a022fdb5c2d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1fc31f0b9194767d490d0a6c45eb19a" id="r_af1fc31f0b9194767d490d0a6c45eb19a"><td class="memItemLeft" align="right" valign="top"><a id="af1fc31f0b9194767d490d0a6c45eb19a" name="af1fc31f0b9194767d490d0a6c45eb19a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WorkerPool</b> (<a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:af1fc31f0b9194767d490d0a6c45eb19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable move constructor. Although std::thread supports move semantics, allowing <a class="el" href="classWorkerPool.html">WorkerPool</a> to be movable could transfer the ownership of an active thread, leaving the source <a class="el" href="classWorker.html" title="Worker thread that consumes data from a queue.">Worker</a> in an inconsistent state. To enforce strict ownership, movement is disabled. <br /></td></tr>
<tr class="separator:af1fc31f0b9194767d490d0a6c45eb19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b9b5ea20e12c555e3becece3070055a" id="r_a5b9b5ea20e12c555e3becece3070055a"><td class="memItemLeft" align="right" valign="top"><a id="a5b9b5ea20e12c555e3becece3070055a" name="a5b9b5ea20e12c555e3becece3070055a"></a>
<a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classWorkerPool.html">WorkerPool</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:a5b9b5ea20e12c555e3becece3070055a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable move assignment operator. Move assignment is also disabled for the same reason: to prevent accidental transfer of thread ownership between <a class="el" href="classWorkerPool.html">WorkerPool</a> instances. <br /></td></tr>
<tr class="separator:a5b9b5ea20e12c555e3becece3070055a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af492a9d585d176b31068f0c54aa580eb" id="r_af492a9d585d176b31068f0c54aa580eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorkerPool.html#af492a9d585d176b31068f0c54aa580eb">start</a> (const int number_workers)</td></tr>
<tr class="separator:af492a9d585d176b31068f0c54aa580eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455d34d2003981e84bddefc4aca4936b" id="r_a455d34d2003981e84bddefc4aca4936b"><td class="memItemLeft" align="right" valign="top"><a id="a455d34d2003981e84bddefc4aca4936b" name="a455d34d2003981e84bddefc4aca4936b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>submit</b> (std::function&lt; void()&gt; task)</td></tr>
<tr class="separator:a455d34d2003981e84bddefc4aca4936b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ea3717fb5924206af6e47a44d42e25" id="r_aa1ea3717fb5924206af6e47a44d42e25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorkerPool.html#aa1ea3717fb5924206af6e47a44d42e25">stop</a> ()</td></tr>
<tr class="separator:aa1ea3717fb5924206af6e47a44d42e25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa9e69469d17c278d8d301b825029500c" name="aa9e69469d17c278d8d301b825029500c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9e69469d17c278d8d301b825029500c">&#9670;&#160;</a></span>WorkerPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WorkerPool::WorkerPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadSafeQueue.html">ThreadSafeQueue</a>&lt; std::function&lt; void()&gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>param</p>
<p>Implementation of the <a class="el" href="classWorker.html" title="Worker thread that consumes data from a queue.">Worker</a> constructor. Initializes references to the queue and action, and sets the worker name. </p>

</div>
</div>
<a id="af4ff5d62810ecbbf010558f2002b2571" name="af4ff5d62810ecbbf010558f2002b2571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ff5d62810ecbbf010558f2002b2571">&#9670;&#160;</a></span>~WorkerPool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WorkerPool::~WorkerPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destruct a <a class="el" href="classWorker.html" title="Worker thread that consumes data from a queue.">Worker</a> object. </p>
<p>Ensures the worker thread has finished before destruction (joins the thread if needed) </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af492a9d585d176b31068f0c54aa580eb" name="af492a9d585d176b31068f0c54aa580eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af492a9d585d176b31068f0c54aa580eb">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WorkerPool::start </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>number_workers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the worker by setting the running flag to true and launching a dedicated thread that executes the run() loop. </p>

</div>
</div>
<a id="aa1ea3717fb5924206af6e47a44d42e25" name="aa1ea3717fb5924206af6e47a44d42e25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ea3717fb5924206af6e47a44d42e25">&#9670;&#160;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WorkerPool::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the worker activity by setting its running flag to false. The worker thread will complete its current loop iteration and then exit. This does not affect the underlying queue. </p><dl class="section note"><dt>Note</dt><dd><a class="el" href="classWorkerPool.html#aa1ea3717fb5924206af6e47a44d42e25">stop()</a> does not interrupt pop() immediately. If the worker is waiting in pop(), it will exit only after the configured timeout (5s by default). This simplifies the design and avoids pushing shutdown logic into the queue. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="worker__pool_8h_source.html">worker_pool.h</a></li>
<li>src/<a class="el" href="worker__pool_8cpp.html">worker_pool.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
